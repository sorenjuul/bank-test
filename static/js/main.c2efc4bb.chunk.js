(this["webpackJsonpbank-test"]=this["webpackJsonpbank-test"]||[]).push([[0],{130:function(e,t,n){e.exports=n(274)},135:function(e,t,n){},266:function(e,t,n){},274:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),i=n.n(o),s=(n(135),n(275),n(123)),c=n(34),l=n.n(c),u=n(63),p=n(64),g=n(70),h=n(65),f=n(71),d=(n(140),n(72));function m(e,t){var n,a;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l.a.awrap(fetch("https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=1794b363d1993ad0517ba5a03ed6f208&tags=".concat(e,"&sort=relevance&safe_search=1&is_getty=true&per_page=12&page=").concat(t,"&format=json&nojsoncallback=1")));case 3:return a=r.sent,r.next=6,l.a.awrap(a.json());case 6:n=r.sent,r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),n={};case 12:return r.abrupt("return",n);case 13:case"end":return r.stop()}}),null,null,[[0,9]])}var v=n(90),b=n.n(v);function w(e){return{imageUrls:b()(e,"photos.photo",[]).map((function(e){return{url:"https://farm".concat(e.farm,".staticflickr.com/").concat(e.server,"/").concat(e.id,"_").concat(e.secret,"_q.jpg"),id:e.id,title:e.title}})),total:b()(e,"photos.total",0)}}var k=n(35),y=n.n(k),E=n(117),C=n.n(E),j=(n(195),n(9)),x=(n(276),n(125)),I=(n(199),n(126)),O=(n(201),n(92)),N=n(127),S=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={inputVisible:!1,inputValue:""},n.handleClose=function(e){var t=n.props.tags.filter((function(t){return t!==e}));n.props.handleChange(t)},n.showInput=function(){n.setState({inputVisible:!0},(function(){return n.input.focus()}))},n.handleInputChange=function(e){n.setState({inputValue:e.target.value})},n.handleInputConfirm=function(){var e=n.state.inputValue,t=n.props.tags;e&&-1===t.indexOf(e)&&(t=[].concat(Object(N.a)(t),[e])),n.setState({inputVisible:!1,inputValue:""}),n.props.handleChange(t)},n.saveInputRef=function(e){return n.input=e},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.inputVisible,a=t.inputValue,o=this.props.tags;return r.a.createElement("div",{className:"tags"},o.map((function(t){var n=t.length>20,a=r.a.createElement(O.a,{key:t,closable:!0,afterClose:function(){return e.handleClose(t)}},n?"".concat(t.slice(0,20),"..."):t);return n?r.a.createElement(I.a,{title:t,key:t},a):a})),n&&r.a.createElement(x.a,{ref:this.saveInputRef,type:"text",size:"small",style:{width:78},value:a,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!n&&r.a.createElement(O.a,{onClick:this.showInput,style:{background:"#fff",borderStyle:"dashed"}},r.a.createElement(j.a,{type:"plus"})," New Tag"))}}]),t}(a.Component),U=(n(112),n(27)),V=(n(114),n(20)),_=(n(277),n(124));var B=function(e){var t=e.imageUrls,n=e.loading;return 0===y()(t)?null:r.a.createElement(U.a,{type:"flex",justify:"space-around",align:"middle"},t.map((function(e){return r.a.createElement(V.a,{key:e.id,xs:24,sm:12,md:8,lg:6},r.a.createElement(_.a,{title:e.title||"No name",loading:n},r.a.createElement("img",{width:"150px",height:"150px",alt:e.title,src:e.url,style:{display:"block",margin:"0 auto"}})))})))},W=(n(266),d.a.Header),T=d.a.Content,A=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={page:1,imageUrls:[],loading:!1,total:0,tags:[]},n.searchImages=function(e,t){var a,r,o,i;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=n.state.tags,r=t||a,0!==y()(r)){s.next=5;break}return n.setState({imageUrls:[],page:1,total:0,tags:[]}),s.abrupt("return");case 5:return n.setState({loading:!0,tags:r}),s.next=8,l.a.awrap(m(r.join(","),e));case 8:o=s.sent,i=w(o),n.setState({imageUrls:i.imageUrls,loading:!1,page:e,total:C()(i.total)});case 11:case"end":return s.stop()}}))},n.paging=function(e){n.searchImages(e)},n.tagsChanged=function(e){n.searchImages(1,e)},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.imageUrls,n=e.loading,a=e.tags,o=e.page,i=e.total;return r.a.createElement("div",{className:"app"},r.a.createElement(d.a,null,r.a.createElement(W,{className:"header"},r.a.createElement("h1",{className:"header__title"},"Bank Test")),r.a.createElement(T,{style:{margin:"24px 16px 0"}},r.a.createElement("div",{style:{padding:24}},r.a.createElement("h4",{style:{marginBottom:16}},"Search for tags on flickr:"),r.a.createElement(S,{handleChange:this.tagsChanged,tags:a}),0===y()(t)&&0!==y()(a)&&r.a.createElement("h2",null,"No results"),r.a.createElement(B,{imageUrls:t,loading:n}),y()(t)>0&&!n&&r.a.createElement("div",{className:"pagination"},r.a.createElement(s.a,{simple:!0,current:o,total:i,pageSize:12,onChange:this.paging}))))))}}]),t}(a.Component),R=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function z(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(A,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/bank-test",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/bank-test","/service-worker.js");R?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):z(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):z(e)}))}}()}},[[130,1,2]]]);
//# sourceMappingURL=main.c2efc4bb.chunk.js.map